<!-- 
No secrets to be found here, traveller.
You're welcome to suggest improvements, or open an issue to let me know something.
-->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />

    <script>
      if (
        window.matchMedia("(prefers-color-scheme: dark)").media === "not all"
      ) {
        document.documentElement.style.display = "none";
        document.head.insertAdjacentHTML(
          "beforeend",
          '<link rel="stylesheet" href="css/themes/light.css" onload="document.documentElement.style.display = \'\'">'
        );
      }
    </script>
    <link
      href="https://fonts.googleapis.com/css?family=Assistant|Overpass+Mono&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css">

    <link rel="stylesheet" href="css/layout.css" />

    <link
      rel="stylesheet"
      href="css/themes/dark.css"
      media="(prefers-color-scheme: dark)"
      data-css-theme="dark"
    />
    <link
      rel="stylesheet"
      href="css/themes/light.css"
      media="(prefers-color-scheme: no-preference), (prefers-color-scheme: light)"
      data-css-theme="light"
    />

    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">

    <title>Rob C.</title>
  </head>
  <body>
    <!-- .content-wrapper brings the content to a specific width, .content creates the grid -->
    <div class="content-wrapper">
      <div class="content">
        <main>
          <div id="about" class="no-select">
            <div class="name">
              <h1>Robert A. Cooper</h1>
            </div>

            <div class="contact">
              <em>contact: <a href="mailto:me@rob.ac">me@rob.ac</a></em>
            </div>

            <div class="info">
              <hr />
              <p>
                Software developer from Sydney, Australia.
                <br />
                Passionate about productivity, developer
                <br />
                happiness, and open source software.
              </p>
            </div>
          </div>
        </main>

        <aside id="links">
          <h2 class="no-select">Socials</h2>

          <div class="bubbles">
            <a href="https://twitter.com/SeparateRecords" target="_blank">
              <div class="bubble">
                <i class="fab fa-twitter twitter"></i>
              </div>
            </a>

            <a href="https://github.com/SeparateRecords" target="_blank">
              <div class="bubble">
                <i class="fab fa-github github"></i>
              </div>
            </a>

            <a href="https://instagram.com/r.brtc" target="_blank">
              <div class="bubble">
                <i class="fab fa-instagram instagram"></i>
              </div>
            </a>

            <a href="mailto:me@rob.ac">
              <div class="bubble">
                <i class="fas fa-paper-plane email"></i>
              </div>
            </a>
          </div>
        </aside>

        <!-- When JS is enabled, .awaiting-js becomes .has-js
        If enabled, the footer becomes a grid and #theme-switcher is shown.
        Otherwise, only the [page source] link is displayed. -->
        <footer class="awaiting-js">
          <a
            id="source"
            href="https://github.com/SeparateRecords/SeparateRecords.github.io"
          >
            &lbrack;page source&rbrack;
            <i class="fas fa-external-link-alt"></i>
          </a>
          <a
            href="javascript:void(0)"
            onclick="toggleDark(this)"
            id="theme-switcher"
            class="awaiting-js no-select"
            data-theme="light"
          >
            &lbrack;switch theme&rbrack;
          </a>
        </footer>
      </div>
    </div>
    <script>
      (function() {
        // Replace all instances of .awaiting-js with .has-js
        Array.from(document.getElementsByClassName("awaiting-js")).forEach(
          node => {
            node.classList.replace("awaiting-js", "has-js");
          }
        );
      })();

      const mq = window.matchMedia("(prefers-color-scheme: dark)");
      if (mq.matches !== "not all") {
        // Set the theme switcher button's data-theme attribute to an initial value,
        // based on the prefers-color-scheme media query.
        document
          .getElementById("theme-switcher")
          .setAttribute("data-theme", mq.matches ? "dark" : "light");
        
        // Use a light-colored favicon if the browser chrome is dark.
        // We can't know that for certain, as the user may be using a theme,
        // but it's better than having  an (effectively) invisible icon.
        if (mq.matches) {
          document.querySelector("[rel='shortcut icon']").href = "favicon_dark.ico";
        }
      }

      // Toggles page dark theme.
      // Sets data-theme on `btn` to track the page theme state.
      function toggleDark(btn) {
        let isDark = btn.getAttribute("data-theme") === "dark";

        btn.setAttribute("data-theme", isDark ? "light" : "dark");

        let usingDarkTheme = isDark ? "not all" : "all";
        let usingLightTheme = isDark ? "all" : "not all";
        document
          .querySelectorAll("[data-css-theme='dark']")
          .forEach(link => (link.media = usingDarkTheme));
        document
          .querySelectorAll("[data-css-theme='light']")
          .forEach(link => (link.media = usingLightTheme));
      }
    </script>
  </body>
</html>
